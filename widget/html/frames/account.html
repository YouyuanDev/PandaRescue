<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,initial-scale=1.0,width=device-width" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>账户</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../../css/aui.css" />
    <link rel="stylesheet" type="text/css" href="../../css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="../../css/style.css" />
    <style type="text/css">
        .account-header {
            width: 100%;
            padding: 0.2rem 0rem;
            height: auto;
        }

        .account-header img {
            width: 5rem;
            height: 5rem;
            border-radius: 50%;
            margin: auto;
        }

        .account-name .account-name-span {
            margin: auto;
            font-size: 1.2rem;
        }
        .account-type p{
          margin:auto;
        }
        .account-type p span:last-child{
           color:#73C0B6;
        }
        /*.account-type span:last-child{
          text-align: left;
        }*/
        .aui-content .aui-list .aui-list-item {
            border-top: none;
            border-bottom: none;
        }

        .aui-list-item-inner {
            border: none;
        }

        .aui-list.aui-list-in .aui-list-item-inner:after {
            width: 100%;
            height: 1px;
            background-color: #fff;
            display: block;
            content: '';
            position: absolute;
            top: auto;
            right: auto;
            bottom: 0;
            left: 0;
            -webkit-transform-origin: 50% 100%;
            transform-origin: 50% 100%;
        }

        .aui-list:after {
            height: 1px;
            background-color: #fff;
            display: block;
            content: '';
            position: absolute;
            top: auto;
            right: auto;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 2;
            -webkit-transform-origin: 50% 100%;
            transform-origin: 50% 100%;
            pointer-events: none;
        }

        .diy-list .diy-list-span span:first-child {
            width: 1.5rem;
        }
    </style>
</head>

<body>
    <header id="header"></header>
    <div class="aui-content aui-margin-b-15 diy-content">
        <ul class="aui-list aui-list-in">
            <li class="aui-list-item" onclick="openUserInfo();">
                <div class="aui-list-item-inner">
                    <div class="account-header"><img class="account-header" src="../../image/sos_128.png" />
                        <div/>
                    </div>
            </li>
            <li class="aui-list-item" onclick="openUserInfo();">
                <div class="aui-list-item-inner account-name">
                    <span class="account-name-span">AndrewLiu</span>
                </div>
            </li>
            <li class="aui-list-item" onclick="openUserInfo();">
                <div class="aui-list-item-inner account-type">
                    <p><span class="i18n1" name="accounttype">账户类型</span>:<span  class="account-type-span"></span></p>
                </div>
            </li>
            <li class="aui-list-item" onclick="openOrder();">
                <div class="aui-list-item-inner">
                    <div class="aui-list-item-title diy-list">
                        <span class="diy-list-span"><span class="fa fa-credit-card"></span><span class="diy-list-span-in i18n1" name="order">订单</span></span>
                    </div>
                </div>
            </li>

            <li class="aui-list-item" onclick="openSetting();">
                <div class="aui-list-item-inner">
                    <div class="aui-list-item-title diy-list">
                        <span class="diy-list-span"><span class="fa fa-cog"></span><span class="diy-list-span-in i18n1" name="settings">设置</span></span>
                    </div>
                </div>
            </li>

            <li class="aui-list-item">
                <div class="aui-list-item-inner">
                    <div class="aui-list-item-title diy-list">
                        <span class="diy-list-span"><span class="fa fa-phone"></span><span class="diy-list-span-in i18n1" name="customerservice">客服</span></span>
                    </div>
                </div>
            </li>
            <li class="aui-list-item" onclick="requestSwitchAccounType();">
                <div class="aui-list-item-inner">
                    <div class="aui-list-item-title diy-list">
                        <span class="diy-list-span"><span class="fa fa-user-circle-o"></span><span class="diy-list-span-in i18n1" name="switchingaccount">切换账户</span></span>
                    </div>
                </div>
            </li>
        </ul>
        </div>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../../script/common.js"></script>
<script src="../../script/jquery.i18n.properties-1.0.9.js" type="text/javascript"></script>
<script src="../../script/language.js" type="text/javascript"></script>
<script type="text/javascript">
    var g_account_type;
    apiready = function() {
        fnSettingHeader();
        var data = api.pageParam;
        if (data != undefined) {
            g_account_type = data.account_type;
            if(g_account_type=="person_user"){
              $('.account-type-span').text("普通用户");
            }else if(g_account_type=="company_user"){
              $('.account-type-span').text("商户");
            }
        }
        registerTouchEvent();
        hlLanguage("../../i18n/");
    }

    function openUserInfo() {
        api.openWin({
            name: 'personal_profile',
            url: '../userinfo/personal_profile.html',
            reload: true,
            pageParam: {}
        });
        api.sendEvent({
            name: 'MaskClickEvent'
        });
    }

    function openOrder() {
        api.openWin({
            name: 'order',
            url: '../order/order.html',
            reload: true,
            pageParam: {}
        });
        api.sendEvent({
            name: 'MaskClickEvent'
        });
    }

    function openSetting() {
        api.openWin({
            name: 'account_setting',
            url: '../setting/account_setting.html',
            reload: true,
            pageParam: {}
        });
        api.sendEvent({
            name: 'MaskClickEvent'
        });
    }

    function requestSwitchAccounType() {
        if (g_account_type != undefined) {
            if (g_account_type == "person_user") {
                g_account_type = "company_user";
            } else if (g_account_type == "company_user") {
                g_account_type = "person_user";
            }
            api.sendEvent({
                name: 'SwitchAccountTypeEvent',
                extra: {
                    account_type: g_account_type
                }
            });
        } else {
            toastFail("切换失败,请稍后重试!");
        }
    }
    //监听页面滑动事件
    function registerTouchEvent() {
        //左右滑动翻页
          $(document.body).on('touchstart', function(e) {
            //touchstart事件
            var $tb = $(this);
            var startX = e.touches[0].clientX, //手指触碰屏幕的x坐标
                pullDeltaX = 0;
            $tb.on('touchmove', function(e) {
                //touchmove事件
                var x = e.touches[0].clientX; //手指移动后所在的坐标
                pullDeltaX = x - startX; //移动后的位移
                if (!pullDeltaX) {
                    return;
                }
                e.preventDefault(); //阻止手机浏览器默认事件
            });
            $tb.on('touchend', function(e) {
                //touchend事件
                $tb.off('touchmove touchend'); //解除touchmove和touchend事件
                //所要执行的代码
                e.stopPropagation();

                //判断移动距离是否大于30像素
                if (pullDeltaX > 30 && that.pagerNum > 1) {

                    //右滑，往前翻所执行的代码
                }
                //判断当前页面是否为最后一页
                else if (pullDeltaX < -30 && that.pagerNum < that.$boxToggle.find('i').length) {

                    //左滑，往后翻所执行的代码
                }
            });
        });
    }
</script>

</html>
